<div class="container mt-5">
  <!-- Page Title -->
  <div class="text-center mb-4">
    <h2 class="fw-bold text-primary">
      <i class="bi bi-clock-history me-2"></i> History Management
    </h2>

  </div>
  <!-- Filters Section -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body">
      <div class="row align-items-center">
        <div class="col-md-4">
          <label class="fw-semibold mb-2 text-secondary">
            <i class="bi bi-search me-2"></i> Search:
          </label>
          <input type="text" class="form-control" placeholder="Search by name, description or info..."
            (input)="applyFilters()" [(ngModel)]="searchItem" />
        </div>

        <div class="col-md-8">
          <label class="fw-semibold mb-2 text-secondary">
            <i class="bi bi-funnel me-2"></i> Filter by type:
          </label>
          <div class="d-flex flex-wrap gap-3">
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="filterEmployee" [(ngModel)]="filters.employee"
                (change)="applyFilters()" />
              <label class="form-check-label" for="filterEmployee">Employee</label>
            </div>

            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="filterDepartment" [(ngModel)]="filters.department"
                (change)="applyFilters()" />
              <label class="form-check-label" for="filterDepartment">Department</label>
            </div>

            <div class="form-check form-check-inline">
              <input class="form-check-input" type="checkbox" id="filterAttendance" [(ngModel)]="filters.attendance"
                (change)="applyFilters()" />
              <label class="form-check-label" for="filterAttendance">Attendance</label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Card Container -->
  <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
    <div class="card-header bg-primary bg-gradient text-white d-flex justify-content-between align-items-center py-3">
      <h5 class="mb-0">
        <i class="bi bi-archive me-2"></i> Deleted Records History
      </h5>
      <span class="badge bg-light text-dark px-3 py-2">
        Total: {{ historyList.length || 0 }}
      </span>
    </div>

    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover table-striped align-middle mb-0">
          <thead class="table-primary text-center">
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Entity Type</th>
              <th>Description</th>
              <th>Deleted At</th>
              <th>Extra Info</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>

          <tbody *ngIf="historyList && historyList.length > 0; else noData">
            <tr *ngFor="let rec of filteredHistory; let i = index" class="align-middle">
              <td class="text-center">{{ i + 1 }}</td>
              <td>{{ rec.Name }}</td>
              <td>
                <span class="badge bg-primary text-white px-2 py-1">
                  {{ rec.EntityType }}
                </span>
              </td>
              <td class=" overflow-expand" style="max-width: 200px; overflow: auto;" title="{{ rec.Description }}">
                {{ rec.Description }}
              </td>
              <td class="text-muted text-center"> {{ rec?.DeletedAt | date:'mediumDate' }}
              </td>

              <td class="text-muted">{{ rec.ExtraInfo }}</td>
              <td class="text-center">
                <button (click)="restore(rec)" class="btn btn-outline-primary btn-sm px-3 me-2" title="Restore">
                  <i class="bi bi-arrow-counterclockwise"></i>
                </button>
                <button class="btn btn-danger" (click)="openDelete(rec)">
                  <i class="bi bi-trash"></i>

                </button>
              </td>
            </tr>
          </tbody>

          <ng-template #noData>
            <tr>
              <td colspan="7" class="text-center py-4">
                <div class="text-muted">
                  <i class="bi bi-info-circle me-2"></i>No Data Found
                </div>
              </td>
            </tr>
          </ng-template>
        </table>
      </div>
    </div>
  </div>
</div>